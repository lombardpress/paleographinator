(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{120:function(e,t,a){e.exports=a(297)},125:function(e,t,a){},137:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},138:function(e,t,a){},297:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(24),s=a.n(i),o=(a(125),a(17)),c=a(18),l=a(20),u=a(19),h=a(21),d=a(118),p=a(32),f=a(15),m=a(29),b=a.n(m),g=(a(137),a(138),a(139),a(25)),v=a.n(g),x=a(30),y=a.n(x),E=a(72),S=a.n(E),k=a(70),j=a.n(k),C=a(53),w=a.n(C),O=a(71),T=a.n(O),I=a(69),L=a.n(I),P=a(40),N=a.n(P),D=a(45),A=a.n(D),R=a(51),W=a.n(R);function q(e,t){return{codex:e["@id"].split("codex=")[1],label:e.label,data:e.resources.constructor===Array?e.resources:[e.resources],next:e.next,prev:e.prev,total:e.within.total,first:e.within.first,last:e.within.last,index:e.startIndex,page:Math.ceil(e.startIndex/t)+1,totalPages:Math.ceil(e.within.total/t)}}var H=a(33),B=a.n(H),F=a(116),U=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={searchText:""},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.imageUrl+"/"+this.props.coords+"/"+this.props.displayWidth+",/0/default.jpg";return r.a.createElement("img",{src:e})}}]),t}(n.Component),Q=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={searchText:""},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"text"},r.a.createElement("span",{dangerouslySetInnerHTML:{__html:this.props.text}}))}}]),t}(n.Component),_=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleShareLink=a.handleShareLink.bind(Object(f.a)(a)),a.state={searchText:""},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleShareLink",value:function(e){window.location.assign("#/surface?lineid="+this.props.surfaceid+"/"+this.props.lineNumber)}},{key:"render",value:function(){var e=this;return r.a.createElement("p",{className:"label"},this.props.label,this.props.surfaceButton&&r.a.createElement(v.a,{onClick:function(){e.props.handleShowSurface(e.props.surfaceid,e.props.label)}},r.a.createElement(y.a,null,"pageview")),r.a.createElement(v.a,{onClick:this.handleShareLink},r.a.createElement(y.a,null,"share")))}}]),t}(n.Component),M=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={searchText:""},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",Object(F.a)({className:"ImageTextWrapper"},"className",function(){if(e.props.targetLabel===e.props.label)return"target"}()),r.a.createElement("div",{className:"labelImageWrapper"},r.a.createElement(_,{label:this.props.label,handleShowSurface:this.props.handleShowSurface,surfaceid:this.props.surfaceid,surfaceButton:this.props.surfaceButton,lineNumber:this.props.lineNumber}),r.a.createElement(U,{imageUrl:this.props.imageUrl,canvas:this.props.canvas,coords:this.props.coords,canvasShort:this.props.canvasShort,displayWidth:this.props.displayWidth})),r.a.createElement(Q,{text:this.props.text}))}}]),t}(n.Component),V=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).scrollToRef=a.scrollToRef.bind(Object(f.a)(a)),a.scrollRef=r.a.createRef(),a.state={data:[],focusedLineNumber:void 0},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"scrollToRef",value:function(){console.log(this.scrollRef)}},{key:"componentDidMount",value:function(){var e=this,t="",a="";if(this.props.surfaceid)t=this.props.surfaceid.split("/resource/")[1],a="";else if(b.a.parse(this.props.location.search)){var n=b.a.parse(this.props.location.search,{ignoreQueryPrefix:!0}).lineid.split("/resource/")[1],r=n.split("/")[0],i=n.split("/")[1];a=n.split("/")[2],t=r+"/"+i,console.log("surfaceid",t)}else t="",a="";var s="https://exist.scta.info/exist/apps/scta-app/folio-annotaiton-list-from-simpleXmlCoordinates.xq?surfaceid="+t;B.a.get(s).then(function(t){var n=t.data;console.log("data",n),e.setState({data:n.resources,focusedLineNumber:parseInt(a)})}).catch(function(e){console.log(e)})}},{key:"componentDidUpdate",value:function(){this.scrollToRef()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"surface"},r.a.createElement("p",null,this.props.surfaceid),e.state.data.map(function(t,a){var n=t.resource.chars,i=t.on.split("#xywh=")[0],s=i.split("/")[i.split("/").length-1],o=t.on.split("#xywh=")[1],c=t.imageUrl,l=t.label,u=l.split("line: ")[1],h=!!e.props.targetLabel;if(e.state.focusedLineNumber===a+1||!e.state.focusedLineNumber)return r.a.createElement("div",{ref:h&&e.scrollRef},r.a.createElement(M,{key:a,imageUrl:c,canvas:i,coords:o,canvasShort:s,text:n,label:l,targetLabel:e.props.targetLabel?e.props.targetLabel:b.a.parse(e.props.location.search,{ignoreQueryPrefix:!0}).targetLabel,surfaceButton:!1,displayWidth:"800",lineNumber:u,surfaceid:e.props.surfaceid}))}))}}]),t}(n.Component),J=function(e){function t(e){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"about"},r.a.createElement("p",null,"Thanks for checking out the ",r.a.createElement("em",null,"Paleographinator"),". The Paleographinator is designed to take advantage of the ongoing global work to transcribe medieval manuscripts and create editions of medieval texts. "),r.a.createElement("p",null,"While this data is often being created primarily to appear as a document on a printed page or web page, when this data is thoughtfully created first as semantically encoded data, it can be aggregated by",r.a.createElement("a",{href:"https://scta.info/resource"},"Scholastic Commentaries and Texts Achive"),", and made available for re-use."),r.a.createElement("p",null,"This particular application recombines data organized by the SCTA, and presents it in a way that makes it easy to compare text abbreviations against other instances."),r.a.createElement("p",null,"Watch a brief demo here:"),r.a.createElement("iframe",{class:"youtube",width:"560",height:"315",src:"https://www.youtube.com/embed/gdfncaR0eu4",frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}),r.a.createElement("p",null,"The app and the data coming from the SCTA are still very much under development, so, while it is already useful, you will find mismatching images and text. However, as work on text editions continues, so will the quality of the search results."),r.a.createElement("p",null,"If you want to report an issue or feature request, please do so here",r.a.createElement("a",{href:"https://github.com/lombardpress/paleographinator/issues"},"https://github.com/lombardpress/paleographinator/issues")))}}]),t}(n.Component),X=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).retrieveInfo=a.retrieveInfo.bind(Object(f.a)(a)),a.handleChange=a.handleChange.bind(Object(f.a)(a)),a.handleChangeCodex=a.handleChangeCodex.bind(Object(f.a)(a)),a.handleChangeInstitution=a.handleChangeInstitution.bind(Object(f.a)(a)),a.handleChangeAfterDate=a.handleChangeAfterDate.bind(Object(f.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a.handleNext=a.handleNext.bind(Object(f.a)(a)),a.handlePrevious=a.handlePrevious.bind(Object(f.a)(a)),a.handleFirst=a.handleFirst.bind(Object(f.a)(a)),a.handleLast=a.handleLast.bind(Object(f.a)(a)),a.triggerSearch=a.triggerSearch.bind(Object(f.a)(a)),a.handleShowSurface=a.handleShowSurface.bind(Object(f.a)(a)),a.handleHideSurface=a.handleHideSurface.bind(Object(f.a)(a)),a.state={searchText:"",searchCodex:"",searchLine:"",searchSurface:"",searchInstitution:"",data:[],surfaceid:"",targetLabel:"",itemsPerPage:5,institutions:[],aboutView:!1,afterDate:""},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t=e.target.value;this.setState({searchText:t})}},{key:"handleChangeCodex",value:function(e){var t=e.target.value;this.setState({searchCodex:t,searchInstitution:"",afterDate:""})}},{key:"handleChangeInstitution",value:function(e){var t=e.target.value;this.setState({searchInstitution:t,searchCodex:"",afterDate:""})}},{key:"handleChangeAfterDate",value:function(e){var t=e.target.value;this.setState({afterDate:t,searchInstitution:"",searchCodex:""})}},{key:"triggerSearch",value:function(e){var t=this;B.a.get(e).then(function(e){var a=e.data,n=[];n=a.constructor===Array?a.map(function(e){return q(e,t.state.itemsPerPage)}):[q(a,t.state.itemsPerPage)],t.setState({data:n})}).catch(function(e){console.log(e)})}},{key:"updateSearch",value:function(e,t){var a=this;B.a.get(e).then(function(e){var n=q(e.data,a.state.itemsPerPage);a.setState(function(e){return{data:e.data.map(function(e){return e.codex===t?n:e})}})}).catch(function(e){console.log(e)})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.retrieveInfo()}},{key:"retrieveInfo",value:function(){var e="?page=1&q="+this.state.searchText;this.state.searchInstitution&&(e=e+"&institution="+this.state.searchInstitution),this.state.searchCodex&&(e=e+"&codex="+this.state.searchCodex),this.state.afterDate&&(e=e+"&afterDate="+this.state.afterDate),this.state.searchSurface&&(e=e+"&searchSurface="+this.state.searchSurface),this.state.searchLine&&(e=e+"&searchLine="+this.state.searchLine);this.triggerSearch("https://exist.scta.info/exist/apps/scta-app/iiifsearch-with-paging-line-level-from-simpleXmlCoordinates2.xq"+e)}},{key:"handleNext",value:function(e){var t=this.state.data.find(function(t){return t.codex===e});this.updateSearch(t.next,e)}},{key:"handlePrevious",value:function(e){var t=this.state.data.find(function(t){return t.codex===e});this.updateSearch(t.prev,e)}},{key:"handleFirst",value:function(e){var t=this.state.data.find(function(t){return t.codex===e});this.updateSearch(t.first,e)}},{key:"handleLast",value:function(e){var t=this.state.data.find(function(t){return t.codex===e});this.updateSearch(t.last,e)}},{key:"handleShowSurface",value:function(e,t){this.setState({surfaceid:e,targetLabel:t})}},{key:"handleHideSurface",value:function(e,t){this.setState({surfaceid:"",targetLabel:""})}},{key:"componentWillMount",value:function(){var e=this;this.props.location.search&&this.setState(function(t){return{searchText:b.a.parse(e.props.location.search,{ignoreQueryPrefix:!0}).searchText,searchCodex:b.a.parse(e.props.location.search,{ignoreQueryPrefix:!0}).searchCodex,searchSurface:b.a.parse(e.props.location.search,{ignoreQueryPrefix:!0}).searchSurface,searchLine:b.a.parse(e.props.location.search,{ignoreQueryPrefix:!0}).searchLine,searchInstitution:b.a.parse(e.props.location.search,{ignoreQueryPrefix:!0}).searchInstitution}},function(){e.retrieveInfo()});var t=this,a=["SELECT DISTINCT ?institution ?institutionTitle  ","WHERE { ","?institution a <http://scta.info/resource/institution> .","?institution <http://purl.org/dc/elements/1.1/title> ?institutionTitle .","}","ORDER BY ?institutionTitle"].join("");B.a.get("https://sparql-docker.scta.info/ds/query",{params:{query:a,output:"json"}}).then(function(e){var a=e.data.results.bindings.map(function(e){return{institutionShortId:e.institution.value.split("/resource/")[1],institutionTitle:e.institutionTitle.value}});t.setState({institutions:a})}).catch(function(e){console.log(e)});var n=["SELECT DISTINCT ?codex ?codexTitle  ","WHERE { ","?codex a <http://scta.info/resource/codex> .","?codex <http://purl.org/dc/elements/1.1/title> ?codexTitle .","}","ORDER BY ?codexTitle"].join("");B.a.get("https://sparql-docker.scta.info/ds/query",{params:{query:n,output:"json"}}).then(function(e){var a=e.data.results.bindings.map(function(e){return{codexShortId:e.codex.value.split("/resource/")[1],codexTitle:e.codexTitle.value}});t.setState({codices:a})}).catch(function(e){console.log(e)})}},{key:"handleToggleAbout",value:function(){this.setState(function(e){return{aboutView:!e.aboutView}})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(j.a,{position:"fixed",color:"primary"},r.a.createElement(T.a,null,r.a.createElement(L.a,{variant:"h6",color:"inherit"},"Paleographinator"),r.a.createElement("form",{onSubmit:this.handleSubmit,id:"input-form"},r.a.createElement(N.a,{htmlFor:"queryString"},"Search Term"),r.a.createElement(S.a,{id:"queryString",onChange:this.handleChange,value:this.state.searchText,placeholder:"search for word here"}),r.a.createElement(N.a,{htmlFor:"queryAfterDate"},"After Date"),r.a.createElement(S.a,{id:"queryAfterDate",onChange:this.handleChangeAfterDate,value:this.state.afterDate,placeholder:"1500"}),r.a.createElement(N.a,{htmlFor:"codices"},"Codices"),r.a.createElement(W.a,{value:this.state.searchCodex,onChange:this.handleChangeCodex,placeholder:"restrict to codex",inputProps:{codex:"codex",id:"codex"}},r.a.createElement(A.a,{key:"blankCodex",value:""},"Select"),function(){var t=["penn","svict","lon","reims","cod-yu78uh","cod-xowk10","penn855","Lyon1518","vatlat955","tara","vat","pal","sorb"];if(e.state.codices)return e.state.codices.map(function(e){if(t.includes(e.codexShortId))return r.a.createElement(A.a,{key:e.codexShortId,value:e.codexShortId},e.codexTitle)})}()),r.a.createElement(N.a,{htmlFor:"institutions"},"Institutions"),r.a.createElement(W.a,{value:this.state.searchInstitution,onChange:this.handleChangeInstitution,inputProps:{institution:"institution",id:"institution"}},r.a.createElement(A.a,{key:"blankInstitutions",value:""},"Select"),function(){var t=["I-i9ujd3","I-pdn3as"];if(e.state.institutions)return e.state.institutions.map(function(e){if(t.includes(e.institutionShortId))return r.a.createElement(A.a,{key:e.codexShortId,value:e.institutionShortId},e.institutionTitle)})}()),r.a.createElement(v.a,{onClick:this.handleSubmit,type:"submit"},r.a.createElement(y.a,{color:"secondary"},"send"))),r.a.createElement(v.a,{onClick:function(){e.handleToggleAbout()}},this.state.aboutView?r.a.createElement("span",null,"Hide About"):r.a.createElement("span",null,"About")))),this.state.aboutView?r.a.createElement(J,null):r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"searchResults"},e.state.data.map(function(t,a){var n=t.data.map(function(t,a){var n=t.resource.chars,i=t.on.split("#xywh=")[0],s=i.split("/")[i.split("/").length-1],o=t.on.split("#xywh=")[1],c=t.imageUrl,l=t.label,u=l.split("line: ")[1],h=t.surfaceId;return r.a.createElement(M,{key:a,imageUrl:c,canvas:i,coords:o,canvasShort:s,text:n,label:l,surfaceid:h,handleShowSurface:e.handleShowSurface,surfaceButton:!0,displayWidth:"800",lineNumber:u})});return r.a.createElement("div",{key:t.codex},r.a.createElement("div",{className:"paggerWrapper"},r.a.createElement("p",null,t.total," total results for codex ",t.label),t.page>2&&r.a.createElement(v.a,{onClick:function(){e.handleFirst(t.codex)}},r.a.createElement(y.a,{color:"secondary"},"first_page")),t.page>1&&r.a.createElement(v.a,{onClick:function(){e.handlePrevious(t.codex)}},r.a.createElement(y.a,{color:"secondary"},"navigate_before")),r.a.createElement("span",null,!!t.page&&t.page),t.page<t.totalPages&&r.a.createElement(v.a,{onClick:function(){e.handleNext(t.codex)},"aria-label":"Next"},r.a.createElement(y.a,{color:"secondary"},"navigate_next")),t.page<t.totalPages-1&&r.a.createElement(v.a,{onClick:function(){e.handleLast(t.codex)}},r.a.createElement(y.a,{color:"secondary"},"last_page"))),r.a.createElement("div",null,n))})),this.state.surfaceid&&r.a.createElement("div",{className:"surfaceResults"},r.a.createElement(v.a,{id:"hide-surface",onClick:this.handleHideSurface},"Hide"),r.a.createElement(V,{key:this.state.surfaceid,surfaceid:this.state.surfaceid,targetLabel:this.state.targetLabel}))),r.a.createElement(j.a,{position:"sticky",color:"primary"},r.a.createElement(T.a,{id:"footer-toolbar"},r.a.createElement(w.a,{href:"http://lombardpress.org",block:!1,color:"secondary"},"A LombardPress Publication"),r.a.createElement(w.a,{href:"https://scta.info",block:!1,color:"secondary"},"Powered by SCTA Data"),r.a.createElement(w.a,{href:"https://jeffreycwitt.com",block:!1,color:"secondary"},"Designed by Jeffrey C. Witt"))))}}]),t}(n.Component),Y=function(e){function t(e){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,{forceRefresh:!1},r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/",exact:!0,component:X}),r.a.createElement(p.a,{path:"/surface",exact:!0,component:V})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[120,1,2]]]);
//# sourceMappingURL=main.f252c847.chunk.js.map