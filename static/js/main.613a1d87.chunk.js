(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t,a){e.exports=a(275)},113:function(e,t,a){},114:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},115:function(e,t,a){},275:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(22),s=a.n(i),o=(a(113),a(16)),c=a(17),l=a(20),u=a(18),h=a(19),d=a(7),p=(a(114),a(115),a(116),a(23)),f=a.n(p),m=a(26),b=a.n(m),g=a(62),v=a.n(g),x=a(60),y=a.n(x),E=a(44),S=a.n(E),j=a(61),O=a.n(j),k=a(59),C=a.n(k),w=a(34),T=a.n(w),I=a(36),D=a.n(I),P=a(43),A=a.n(P);function L(e,t){return{codex:e["@id"].split("codex=")[1],label:e.label,data:e.resources.constructor===Array?e.resources:[e.resources],next:e.next,prev:e.prev,total:e.within.total,first:e.within.first,last:e.within.last,index:e.startIndex,page:Math.ceil(e.startIndex/t)+1,totalPages:Math.ceil(e.within.total/t)}}var N=a(27),R=a.n(N),W=a(106),q=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={searchText:""},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.imageUrl+"/"+this.props.coords+"/"+this.props.displayWidth+",/0/default.jpg";return r.a.createElement("img",{src:e})}}]),t}(n.Component),H=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={searchText:""},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"text"},r.a.createElement("span",{dangerouslySetInnerHTML:{__html:this.props.text}}))}}]),t}(n.Component),B=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={searchText:""},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("p",{className:"label"},this.props.label,this.props.surfaceButton&&r.a.createElement(f.a,{onClick:function(){e.props.handleShowSurface(e.props.surfaceid,e.props.label)}},r.a.createElement(b.a,null,"pageview")))}}]),t}(n.Component),F=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={searchText:""},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",Object(W.a)({className:"ImageTextWrapper"},"className",function(){if(e.props.targetLabel===e.props.label)return"target"}()),r.a.createElement("div",{className:"labelImageWrapper"},r.a.createElement(B,{label:this.props.label,handleShowSurface:this.props.handleShowSurface,surfaceid:this.props.surfaceid,surfaceButton:this.props.surfaceButton}),r.a.createElement(q,{imageUrl:this.props.imageUrl,canvas:this.props.canvas,coords:this.props.coords,canvasShort:this.props.canvasShort,displayWidth:this.props.displayWidth})),r.a.createElement(H,{text:this.props.text}))}}]),t}(n.Component),U=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).scrollToRef=a.scrollToRef.bind(Object(d.a)(Object(d.a)(a))),a.scrollRef=r.a.createRef(),a.state={data:[]},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"scrollToRef",value:function(){console.log(this.scrollRef),this.scrollRef.current.scrollIntoView(!0)}},{key:"componentDidMount",value:function(){var e=this,t="https://exist.scta.info/exist/apps/scta-app/folio-annotaiton-list-from-simpleXmlCoordinates.xq?surfaceid="+this.props.surfaceid.split("/resource/")[1];R.a.get(t).then(function(t){var a=t.data;e.setState({data:a.resources})}).catch(function(e){console.log(e)})}},{key:"componentDidUpdate",value:function(){this.scrollToRef()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"surface"},r.a.createElement("p",null,this.props.surfaceid),e.state.data.map(function(t,a){var n=t.resource.chars,i=t.on.split("#xywh=")[0],s=i.split("/")[i.split("/").length-1],o=t.on.split("#xywh=")[1],c=t.imageUrl,l=t.label,u=l===e.props.targetLabel;return r.a.createElement("div",{ref:u&&e.scrollRef},r.a.createElement(F,{key:a,imageUrl:c,canvas:i,coords:o,canvasShort:s,text:n,label:l,targetLabel:e.props.targetLabel,surfaceButton:!1,displayWidth:"800"}))}))}}]),t}(n.Component),V=function(e){function t(e){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"about"},r.a.createElement("p",null,"Thanks for checking out the ",r.a.createElement("em",null,"Paleographinator"),". The Paleographinator is designed to take advantage of the ongoing global work to transcribe medieval manuscripts and create editions of medieval texts. "),r.a.createElement("p",null,"While this data is often being created primarily to appear as a document on a printed page or web page, when this data is thoughtfully created first as semantically encoded data, it can be aggregated by",r.a.createElement("a",{href:"https://scta.info/resource"},"Scholastic Commentaries and Texts Achive"),", and made available for re-use."),r.a.createElement("p",null,"This particular application recombines data organized by the SCTA, and presents it in a way that makes it easy to compare text abbreviations against other instances."),r.a.createElement("p",null,"Watch a brief demo here:"),r.a.createElement("iframe",{class:"youtube",width:"560",height:"315",src:"https://www.youtube.com/embed/gdfncaR0eu4",frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}),r.a.createElement("p",null,"The app and the data coming from the SCTA are still very much under development, so, while it is already useful, you will find mismatching images and text. However, as work on text editions continues, so will the quality of the search results."),r.a.createElement("p",null,"If you want to report an issue or feature request, please do so here",r.a.createElement("a",{href:"https://github.com/lombardpress/paleographinator/issues"},"https://github.com/lombardpress/paleographinator/issues")))}}]),t}(n.Component),_=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(d.a)(Object(d.a)(a))),a.handleChangeCodex=a.handleChangeCodex.bind(Object(d.a)(Object(d.a)(a))),a.handleChangeInstitution=a.handleChangeInstitution.bind(Object(d.a)(Object(d.a)(a))),a.handleChangeAfterDate=a.handleChangeAfterDate.bind(Object(d.a)(Object(d.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(d.a)(Object(d.a)(a))),a.handleNext=a.handleNext.bind(Object(d.a)(Object(d.a)(a))),a.handlePrevious=a.handlePrevious.bind(Object(d.a)(Object(d.a)(a))),a.handleFirst=a.handleFirst.bind(Object(d.a)(Object(d.a)(a))),a.handleLast=a.handleLast.bind(Object(d.a)(Object(d.a)(a))),a.triggerSearch=a.triggerSearch.bind(Object(d.a)(Object(d.a)(a))),a.handleShowSurface=a.handleShowSurface.bind(Object(d.a)(Object(d.a)(a))),a.handleHideSurface=a.handleHideSurface.bind(Object(d.a)(Object(d.a)(a))),a.state={searchText:"",searchCodex:"",searchInstitution:"",data:[],surfaceid:"",targetLabel:"",itemsPerPage:5,institutions:[],aboutView:!1,afterDate:""},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t=e.target.value;this.setState({searchText:t})}},{key:"handleChangeCodex",value:function(e){var t=e.target.value;this.setState({searchCodex:t,searchInstitution:"",afterDate:""})}},{key:"handleChangeInstitution",value:function(e){var t=e.target.value;this.setState({searchInstitution:t,searchCodex:"",afterDate:""})}},{key:"handleChangeAfterDate",value:function(e){var t=e.target.value;this.setState({afterDate:t,searchInstitution:"",searchCodex:""})}},{key:"triggerSearch",value:function(e){var t=this;R.a.get(e).then(function(e){var a=e.data,n=[];n=a.constructor===Array?a.map(function(e){return L(e,t.state.itemsPerPage)}):[L(a,t.state.itemsPerPage)],t.setState({data:n})}).catch(function(e){console.log(e)})}},{key:"updateSearch",value:function(e,t){var a=this;R.a.get(e).then(function(e){var n=L(e.data,a.state.itemsPerPage);a.setState(function(e){return{data:e.data.map(function(e){return e.codex===t?n:e})}})}).catch(function(e){console.log(e)})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t="?page=1&q="+this.state.searchText;this.state.searchInstitution&&(t=t+"&institution="+this.state.searchInstitution),this.state.searchCodex&&(t=t+"&codex="+this.state.searchCodex),this.state.afterDate&&(t=t+"&afterDate="+this.state.afterDate);this.triggerSearch("https://exist.scta.info/exist/apps/scta-app/iiifsearch-with-paging-line-level-from-simpleXmlCoordinates2.xq"+t)}},{key:"handleNext",value:function(e){var t=this.state.data.find(function(t){return t.codex===e});this.updateSearch(t.next,e)}},{key:"handlePrevious",value:function(e){var t=this.state.data.find(function(t){return t.codex===e});this.updateSearch(t.prev,e)}},{key:"handleFirst",value:function(e){var t=this.state.data.find(function(t){return t.codex===e});this.updateSearch(t.first,e)}},{key:"handleLast",value:function(e){var t=this.state.data.find(function(t){return t.codex===e});this.updateSearch(t.last,e)}},{key:"handleShowSurface",value:function(e,t){this.setState({surfaceid:e,targetLabel:t})}},{key:"handleHideSurface",value:function(e,t){this.setState({surfaceid:"",targetLabel:""})}},{key:"componentWillMount",value:function(){var e=this,t=["SELECT DISTINCT ?institution ?institutionTitle  ","WHERE { ","?institution a <http://scta.info/resource/institution> .","?institution <http://purl.org/dc/elements/1.1/title> ?institutionTitle .","}","ORDER BY ?institutionTitle"].join("");R.a.get("https://sparql-docker.scta.info/ds/query",{params:{query:t,output:"json"}}).then(function(t){var a=t.data.results.bindings.map(function(e){return{institutionShortId:e.institution.value.split("/resource/")[1],institutionTitle:e.institutionTitle.value}});e.setState({institutions:a})}).catch(function(e){console.log(e)});var a=["SELECT DISTINCT ?codex ?codexTitle  ","WHERE { ","?codex a <http://scta.info/resource/codex> .","?codex <http://purl.org/dc/elements/1.1/title> ?codexTitle .","}","ORDER BY ?codexTitle"].join("");R.a.get("https://sparql-docker.scta.info/ds/query",{params:{query:a,output:"json"}}).then(function(t){var a=t.data.results.bindings.map(function(e){return{codexShortId:e.codex.value.split("/resource/")[1],codexTitle:e.codexTitle.value}});e.setState({codices:a})}).catch(function(e){console.log(e)})}},{key:"handleToggleAbout",value:function(){this.setState(function(e){return{aboutView:!e.aboutView}})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(y.a,{position:"fixed",color:"primary"},r.a.createElement(O.a,null,r.a.createElement(C.a,{variant:"h6",color:"inherit"},"Paleographinator"),r.a.createElement("form",{onSubmit:this.handleSubmit,id:"input-form"},r.a.createElement(T.a,{htmlFor:"queryString"},"Search Term"),r.a.createElement(v.a,{id:"queryString",onChange:this.handleChange,value:this.state.searchText,placeholder:"search for word here"}),r.a.createElement(T.a,{htmlFor:"queryAfterDate"},"After Date"),r.a.createElement(v.a,{id:"queryAfterDate",onChange:this.handleChangeAfterDate,value:this.state.afterDate,placeholder:"1500"}),r.a.createElement(T.a,{htmlFor:"codices"},"Codices"),r.a.createElement(A.a,{value:this.state.searchCodex,onChange:this.handleChangeCodex,placeholder:"restrict to codex",inputProps:{codex:"codex",id:"codex"}},r.a.createElement(D.a,{key:"blankCodex",value:""},"Select"),function(){var t=["penn","svict","lon","reims","cod-yu78uh","cod-xowk10","penn855","Lyon1518"];if(e.state.codices)return e.state.codices.map(function(e){if(t.includes(e.codexShortId))return r.a.createElement(D.a,{key:e.codexShortId,value:e.codexShortId},e.codexTitle)})}()),r.a.createElement(T.a,{htmlFor:"institutions"},"Institutions"),r.a.createElement(A.a,{value:this.state.searchInstitution,onChange:this.handleChangeInstitution,inputProps:{institution:"institution",id:"institution"}},r.a.createElement(D.a,{key:"blankInstitutions",value:""},"Select"),function(){var t=["I-i9ujd3","I-pdn3as"];if(e.state.institutions)return e.state.institutions.map(function(e){if(t.includes(e.institutionShortId))return r.a.createElement(D.a,{key:e.codexShortId,value:e.institutionShortId},e.institutionTitle)})}()),r.a.createElement(f.a,{onClick:this.handleSubmit,type:"submit"},r.a.createElement(b.a,{color:"secondary"},"send"))),r.a.createElement(f.a,{onClick:function(){e.handleToggleAbout()}},this.state.aboutView?r.a.createElement("span",null,"Hide About"):r.a.createElement("span",null,"About")))),this.state.aboutView?r.a.createElement(V,null):r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"searchResults"},e.state.data.map(function(t,a){var n=t.data.map(function(t,a){var n=t.resource.chars,i=t.on.split("#xywh=")[0],s=i.split("/")[i.split("/").length-1],o=t.on.split("#xywh=")[1],c=t.imageUrl,l=t.label,u=t.surfaceId;return r.a.createElement(F,{key:a,imageUrl:c,canvas:i,coords:o,canvasShort:s,text:n,label:l,surfaceid:u,handleShowSurface:e.handleShowSurface,surfaceButton:!0,displayWidth:"800"})});return r.a.createElement("div",{key:t.codex},r.a.createElement("div",{className:"paggerWrapper"},r.a.createElement("p",null,t.total," total results for codex ",t.label),t.page>2&&r.a.createElement(f.a,{onClick:function(){e.handleFirst(t.codex)}},r.a.createElement(b.a,{color:"secondary"},"first_page")),t.page>1&&r.a.createElement(f.a,{onClick:function(){e.handlePrevious(t.codex)}},r.a.createElement(b.a,{color:"secondary"},"navigate_before")),r.a.createElement("span",null,!!t.page&&t.page),t.page<t.totalPages&&r.a.createElement(f.a,{onClick:function(){e.handleNext(t.codex)},"aria-label":"Next"},r.a.createElement(b.a,{color:"secondary"},"navigate_next")),t.page<t.totalPages-1&&r.a.createElement(f.a,{onClick:function(){e.handleLast(t.codex)}},r.a.createElement(b.a,{color:"secondary"},"last_page"))),r.a.createElement("div",null,n))})),this.state.surfaceid&&r.a.createElement("div",{className:"surfaceResults"},r.a.createElement(f.a,{id:"hide-surface",onClick:this.handleHideSurface},"Hide"),r.a.createElement(U,{key:this.state.surfaceid,surfaceid:this.state.surfaceid,targetLabel:this.state.targetLabel}))),r.a.createElement(y.a,{position:"sticky",color:"primary"},r.a.createElement(O.a,{id:"footer-toolbar"},r.a.createElement(S.a,{href:"http://lombardpress.org",block:!1,color:"secondary"},"A LombardPress Publication"),r.a.createElement(S.a,{href:"https://scta.info",block:!1,color:"secondary"},"Powered by SCTA Data"),r.a.createElement(S.a,{href:"https://jeffreycwitt.com",block:!1,color:"secondary"},"Designed by Jeffrey C. Witt"))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[108,1,2]]]);
//# sourceMappingURL=main.613a1d87.chunk.js.map